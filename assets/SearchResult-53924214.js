import{b}from"./index-87596f9d.js";import{b as C,i as k,h as x}from"./@varlet-7ae03b61.js";import{_ as q}from"./TopBar.vue_vue_type_style_index_0_lang-e9176c74.js";import{a as A}from"./search-36dbb5c7.js";import{A as B}from"./ArticleCell-e10b2560.js";import{b as L,u as R}from"./vue-router-bac0c6f6.js";import{q as S,r as w,h as m,M as p,s as i,I as _,A as d,O as E,z as r,F as N,N as z}from"./@vue-64dd07d0.js";import"./pinia-2579c363.js";import"./vue-demi-71ba0ef2.js";import"./amfe-flexible-ec0a06bf.js";import"./highlight.js-9e946018.js";import"./decimal.js-d133ee8e.js";import"./dayjs-ee28432e.js";import"./@popperjs-974c24ae.js";import"./request-a0f91418.js";import"./axios-aba6f0e0.js";import"./timeFormat-5849a29c.js";const Y=S({__name:"SearchResult",setup(F){const l=L(),f=R();l.query.q||C.warning({content:"参数非法！",duration:2e3,onClosed:()=>f.push("/home/index")});const o=w([]),s=m(!1),a=m(!1);let c=1;async function u(){try{const{data:e}=await A({q:l.query.q,page:c});c++,e!=null&&e.results.length||(a.value=!0),e==null||e.results.forEach(n=>{o.push(n)})}catch{a.value=!0}finally{s.value=!1}}return u(),(e,n)=>{const h=q,v=x,g=k,y=b;return r(),p("div",null,[i(h,{title:"搜索结果"}),i(g,{"finished-text":o.length?"没有更多了":"",finished:a.value,loading:s.value,"onUpdate:loading":n[0]||(n[0]=t=>s.value=t),onLoad:u},{default:_(()=>[(r(!0),p(N,null,z(o,t=>(r(),d(v,{key:t},{default:_(()=>[i(B,{art_id:t.art_id,title:t.title,aut_id:t.aut_id,comm_count:t.comm_count,pubdate:t.pubdate,aut_name:t.aut_name,cover:t.cover},null,8,["art_id","title","aut_id","comm_count","pubdate","aut_name","cover"])]),_:2},1024))),128))]),_:1},8,["finished-text","finished","loading"]),!o.length&&a.value?(r(),d(y,{key:0,style:{"padding-top":"150px"},title:"搜索不到相关的文章呢，换个关键词吧","icon-size":"85","icon-color":"skyblue"})):E("",!0)])}}});export{Y as default};
