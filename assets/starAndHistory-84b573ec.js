import{e as h,f as y}from"./user-cfbfdba8.js";import{D as d}from"./@varlet-7ae03b61.js";import{u as v}from"./vue-router-bac0c6f6.js";import{r as A,h as r,o as L}from"./@vue-64dd07d0.js";const _=l=>{const s=A([]);let e=1;const i=r(!1),o=r(!1),u=v(),a=r(!0);async function n(){try{o.value=!0;const{data:t}=await(l?h(e):y(e));e++,t==null||t.results.forEach(c=>{s.push(c)}),o.value=!1,s.length===(t==null?void 0:t.total_count)&&(i.value=!0)}catch{u.push("/login")}}async function f(t){await d("真的要删除该文章的记录吗?")==="confirm"&&s.some((m,p,g)=>{if(m.art_id===t)return g.splice(p,1),!0})}return L(async()=>{await n(),a.value=!1}),{loadArticleList:n,list:s,finished:i,loadingList:o,loading:a,deleteArticle:f}};export{_ as s};
