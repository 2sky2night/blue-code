import{a as n}from"./axios-aba6f0e0.js";import{b as o}from"./@varlet-7ae03b61.js";function a(e,t,s){o[s]({content:e,duration:t})}const u=e=>e==="Network Error"?"无网络，请连上网再重试!":"出错了",r=n.create({baseURL:"http://geek.itheima.net",timeout:5e3});r.interceptors.request.use(e=>{a("加载中",0,"loading");const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>(console.log("出错了!"),a(e.message,3e3,"error"),Promise.reject(e)));r.interceptors.response.use(e=>{if(e.status===204)return a("加载完成",500,"success"),e;const t=e.data;return t.message==="OK"||t.message==="更新用户频道成功"?(a("加载完成",500,"success"),t):(a(t.message,2e3,"error"),Promise.reject(new Error(t.message)))},e=>{var t;return(t=e.response)!=null&&t.data?e.message=e.response.data.message:e.message=u(e.message),a(e.message,2e3,"error"),Promise.reject(e)});const i={get(e,t={}){return r.get(e,t)},post(e,t={},s={}){return r.post(e,t,s)},delete(e,t={}){return r.delete(e,t)},patch(e,t={},s={}){return r.patch(e,t,s)},put(e,t={},s={}){return r.put(e,t,s)}};export{i as r};
