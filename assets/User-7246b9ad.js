import{D as U,e as B,h as D,o as b,b as $}from"./@varlet-7ae03b61.js";import{g as F}from"./user-cfbfdba8.js";import{u as w}from"./user-130e8ee1.js";import{s as P}from"./pinia-2579c363.js";import{u as v}from"./vue-router-bac0c6f6.js";import{a as L,q as g,M as f,J as n,L as h,z as m,A as N,I as R,s as c,u as r,F as y,N as T,R as A,S as V,aa as x}from"./@vue-64dd07d0.js";import{_ as q}from"./BigPhoto.vue_vue_type_script_setup_true_lang-832fbd30.js";import{P as z}from"./pubsub-js-d5437756.js";import{a as I}from"./index-87596f9d.js";import"./decimal.js-d133ee8e.js";import"./dayjs-ee28432e.js";import"./@popperjs-974c24ae.js";import"./request-a0f91418.js";import"./axios-aba6f0e0.js";import"./vue-demi-71ba0ef2.js";import"./highlight.js-9e946018.js";import"./amfe-flexible-ec0a06bf.js";const E=()=>{const e=w(),{userBaseData:t}=P(e),s=v();async function l(){var u,o,_,a,p,k,C;try{const i=await F();t.value.art_count=(u=i.data)==null?void 0:u.art_count,t.value.fans_count=(o=i.data)==null?void 0:o.fans_count,t.value.follow_count=(_=i.data)==null?void 0:_.follow_count,t.value.id=(a=i.data)==null?void 0:a.id,t.value.like_count=(p=i.data)==null?void 0:p.like_count,t.value.name=(k=i.data)==null?void 0:k.name,t.value.photo=(C=i.data)==null?void 0:C.photo}catch{s.push("/login")}}return L(l),t},G=g({__name:"UserDataItem",props:{path:null,count:null,title:null},setup(e){const t=e,s=v();function l(){t.path&&s.push(t.path)}return(u,o)=>(m(),f("li",{onClick:l},[n("div",null,h(e.count),1),n("div",null,h(e.title),1)]))}});const d=I(G,[["__scopeId","data-v-e277d344"]]),J=g({__name:"UserFunctionCell",props:{titleIcon:null,title:null,path:null},setup(e){const t=e,s=v(),l=w();async function u(){t.path==="/login"&&await U({message:"真的要退出吗？",title:"提示"})==="confirm"&&(localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),l.$reset()),s.push(t.path)}return(o,_)=>{const a=B,p=D;return m(),N(p,{icon:e.titleIcon,title:e.title,class:"cell",onClick:u},{extra:R(()=>[c(a,{name:"chevron-right",color:"rgb(200,200,200)"})]),_:1},8,["icon","title"])}}});const M=I(J,[["__scopeId","data-v-a7905374"]]),S=e=>(A("data-v-f2e48090"),e=e(),V(),e),O={id:"user",class:"in-page"},j={id:"user-infor-box"},H={id:"user-infor"},K=S(()=>n("span",null,"简介：你好，谢谢，小笼包，再见！",-1)),Q=S(()=>n("span",{style:{width:"50px"}},"申请认证",-1)),W={id:"user-more-infor"},X=g({__name:"User",setup(e){const t=E(),s=[{path:"/user_editor",titleIcon:"cog-outline",title:"编辑资料"},{path:"/history",titleIcon:"fire",title:"历史记录"},{path:"/star",titleIcon:"star-outline",title:"收藏的文章"},{path:"/chat",titleIcon:"message-processing-outline",title:"小蓝chat"},{path:"/login",titleIcon:"alert-circle-outline",title:"退出登陆"}];function l(){z.publish("onOpen")}return(u,o)=>{const _=b;return m(),f(y,null,[n("div",O,[n("div",j,[n("div",null,[c(_,{onClick:l,width:"60",fit:"cover",height:"60",alt:"用户头像",style:{"border-radius":"50%"},src:r(t).photo},null,8,["src"]),n("div",H,[n("span",null,h(r(t).name),1),K,Q])]),n("ul",W,[c(d,{title:"动态",count:r(t).art_count,onClick:o[0]||(o[0]=a=>r($).info({content:"暂未开放!"}))},null,8,["count"]),c(d,{title:"关注",path:"/follow",count:r(t).follow_count},null,8,["count"]),c(d,{title:"粉丝",path:"/fans",count:r(t).fans_count},null,8,["count"])])]),n("div",null,[o[1]||(x(-1),o[1]=(m(),f(y,null,T(s,a=>c(M,{path:a.path,title:a.title,"title-icon":a.titleIcon},null,8,["path","title","title-icon"])),64)),x(1),o[1])])]),c(q,{images:[r(t).photo]},null,8,["images"])],64)}}});const ft=I(X,[["__scopeId","data-v-f2e48090"]]);export{ft as default};
